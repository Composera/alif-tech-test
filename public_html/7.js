(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{15:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r);function o(t,e,n,r,a,o,i){try{var s=t[o](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,l,"next",t)}function l(t){o(i,r,a,s,l,"throw",t)}s(void 0)}))}}var s={name:"MainPage",mounted:function(){this.getFolder(this.$route.params.folder_slug)},data:function(){return{folder:{}}},methods:{getFolder:function(t){var e=this;return i(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get("/api/get/folder/"+t+"/files").then((function(t){e.folder=t.data.folder,console.log(t)})).catch((function(t){console.log(t)})).then((function(){}));case 2:case"end":return n.stop()}}),n)})))()},deleteFile:function(t){var e=this;return i(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!confirm("Вы уверены?")){n.next=3;break}return n.next=3,axios.get("/api/delete/"+t+"/file").then((function(t){e.$toasted.show("Успешно удалено!",{action:{text:"Закрыть",onClick:function(t,e){e.goAway(0)}}}),console.log(t)})).catch((function(t){e.$toasted.show("Что-то пошло не так...",{action:{text:"Закрыть",onClick:function(t,e){e.goAway(0)}}}),console.log(t)})).then((function(){e.getFolder(e.$route.params.folder_slug)}));case 3:case"end":return n.stop()}}),n)})))()}}},l=n(2),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("nav",{attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},[n("li",{staticClass:"breadcrumb-item"},[n("router-link",{attrs:{to:{name:"main"}}},[t._v("Главная")])],1),t._v(" "),void 0!==t.folder.parent?n("li",{staticClass:"breadcrumb-item"},[n("router-link",{attrs:{to:{name:"cupboard",params:{slug:t.folder.parent.parent.slug}}}},[t._v("\n                        "+t._s(t.folder.parent.parent.title)+"\n                    ")])],1):t._e(),t._v(" "),void 0!==t.folder.parent?n("li",{staticClass:"breadcrumb-item"},[n("router-link",{attrs:{to:{name:"cell_folders",params:{cell_slug:t.folder.parent.slug}}}},[t._v("\n                        "+t._s(t.folder.parent.title)+"\n                    ")])],1):t._e(),t._v(" "),n("li",{staticClass:"breadcrumb-item"},[t._v(t._s(t.folder.title))])])])]),t._v(" "),t._m(0),t._v(" "),void 0!==t.folder.title?t._l(t.folder.files,(function(e,r){return n("div",{key:e.title+r,staticClass:"col-md-4 mb-3"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(e.filename))]),t._v(" "),n("a",{staticClass:"btn btn-primary",attrs:{download:"",target:"_blank",href:"/storage/uploads/file_images/"+e.file_server_name}},[t._v("Скачать")]),t._v(" "),n("button",{staticClass:"btn btn-danger",on:{click:function(n){return t.deleteFile(e.id)}}},[t._v("Удалить")])])])])})):t._e()],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12 d-flex justify-content-between"},[e("h1",[this._v("Файлы папки")])])}],!1,null,null,null);e.default=c.exports}}]);